# Week2

## 1. MVCC 개념
MVCC는 다중 버전 동시성 제어로, 데이터베이스가 트랜잭션 간의 충돌 없이 동시성을 높이기 위해 각 트랜잭션이 데이터의 스냅샷(버전)을 읽도록 하는 방법이다. 이를 통해 락의 사용을 줄이고 읽기 작업이 쓰기 작업과 충돌하지 않게 한다.

- **장점:** 읽기 작업이 블록되지 않음, 성능 향상
- **단점:** 버전 관리 오버헤드, 저장공간 증가

MySQL에서는 InnoDB 스토리지 엔진이 MVCC를 지원하며, 트랜잭션의 undo log를 활용하여 이전 버전을 제공한다.


## 2. MVCC와 Isolation Level 동작

| Isolation Level | MVCC 동작 | MySQL (InnoDB) 동작 예시 |
|-----------------|------------|-----------------------------|
| Read Uncommitted | 버전을 고려하지 않고 커밋되지 않은 데이터도 읽음 | 다른 트랜잭션이 아직 커밋하지 않은 변경 데이터 읽기 가능 (Dirty Read) |
| Read Committed | 커밋된 최신 버전만 읽음 | 현재 시점의 커밋된 버전만 읽음, 같은 트랜잭션 내에서도 쿼리마다 스냅샷 갱신 (Non-repeatable Read 가능) |
| Repeatable Read (MySQL 기본값) | 트랜잭션 시작 시점의 버전만 읽음 | 트랜잭션 동안 동일한 스냅샷 사용, Phantom Read는 Gap Lock으로 방지 |
| Serializable | 모든 읽기 작업을 공유 락으로 처리 | 완전한 직렬화 수준으로 동작, 성능 저하 가능 |

> 📌 MySQL InnoDB의 기본 Isolation Level은 Repeatable Read이며, MVCC로 Phantom Read를 일부 방지.


---

## 테이블 설계와 함수 종속성

### 1. 테이블 설계
테이블 설계는 데이터 무결성과 중복 최소화를 목표로 한다. 주요 원칙은 정규화를 통해 데이터 중복을 제거하고, 관계형 무결성을 유지하는 것이다.

- **속성(Attribute):** 컬럼
- **튜플(Tuple):** 행(Row)
- **릴레이션(Relation):** 테이블

### 2. 함수 종속성 (Functional Dependency)

함수 종속성은 한 속성이 다른 속성의 값을 결정짓는 관계를 나타낸다.

- **X → Y:** X가 주어지면 Y가 결정됨
  - 예: 학번 → 이름, 전공

함수 종속성은 정규화 과정에서 중요한 역할을 함.

- **Partial Dependency:** 기본키의 일부로만 결정됨 (2NF에서 제거)
- **Transitive Dependency:** 비키 속성이 다른 비키 속성에 의해 결정됨 (3NF에서 제거)

### 3. 정규화 단계와 함수 종속성

| 단계 | 조건 | 목적 |
|------|------|------|
| 1NF | 원자값만 허용 | 중복 제거, 데이터 원자성 확보 |
| 2NF | 1NF + Partial Dependency 제거 | 부분 종속 제거 |
| 3NF | 2NF + Transitive Dependency 제거 | 이행 종속 제거 |
| BCNF | 모든 결정자가 후보키 | 강력한 정규형 |


---

## 요약
- **MVCC:** 다중 버전으로 락 없이 읽기 성능 향상
- **Isolation Level:** MVCC에 따라 커밋 데이터 읽는 범위 달라짐
- **테이블 설계:** 함수 종속성을 통해 정규화하여 무결성 유지
