## 2. DB 테이블 스키마 설계 및 정규화 기초

잘못된 스키마 설계는 데이터의 **일관성**과 **무결성**에 심각한 문제를 야기할 수 있습니다.

### 2.1. 잘못된 스키마 설계의 문제점 (Anomaly)

단일 테이블에 여러 관련 없는 관심사를 함께 저장할 때 발생하는 데이터 중복 및 불일치 현상을 **Anomaly**이라고 합니다.

- **삽입 이상 (Insertion Anomaly)**: 특정 정보를 삽입하기 위해 불필요한 다른 정보도 함께 삽입해야 하거나, 아예 삽입이 불가능한 경우를 말합니다.
- **삭제 이상 (Deletion Anomaly)**: 특정 데이터를 삭제할 때, 의도하지 않게 다른 유용한 정보까지 함께 삭제되는 경우입니다. 예를 들어, 팀의 마지막 직원을 삭제할 때 해당 팀 정보까지 사라지는 경우가 있습니다.
- **갱신 이상 (Update Anomaly)**: 중복된 데이터 중 일부만 갱신되어 데이터 불일치가 발생하는 경우입니다. 예를 들어, 여러 직원이 속한 부서의 이름을 변경할 때, 일부 직원의 부서 이름만 변경되어 데이터 불일치가 발생하는 경우가 있습니다.
- **허위 튜플 (Spurious Tuple)**: 잘못 설계된 테이블을 조인할 때, 의미적으로 존재하지 않는 가상의 튜플(행)이 생성되는 현상입니다. 관련성 없는 속성들 간의 조인 조건으로 인해 발생합니다.

### 2.2. 좋은 테이블 설계 원칙

- **의미적 관련성**: 의미적으로 관련된 속성들끼리 묶어 테이블을 구성합니다. 각 테이블은 하나의 명확한 관심사만을 다루어야 합니다.
- **데이터 중복 최소화**: 중복 데이터를 최대한 허용하지 않도록 설계합니다. 이를 통해 저장 공간 낭비를 줄이고 데이터 불일치 가능성을 낮춥니다.
- **허위 튜플 방지**: 조인 시 가짜 데이터가 생기지 않도록 **Primary Key**와 **Foreign Key**를 적절히 활용하여 테이블 간의 관계를 명확히 정의합니다.
- **NULL 값 최소화**: 되도록 NULL 값을 줄이는 방향으로 설계합니다. NULL 값이 많아지면 조인 결과가 예상과 달라지거나, 집계 함수 사용 시 주의가 필요하며, 불필요한 저장 공간을 낭비할 수 있습니다.
- **참고**: 때로는 성능 향상을 위해 의도적으로 테이블을 나누지 않거나(비정규화), 조인 횟수를 줄이는 설계를 할 수도 있습니다.
