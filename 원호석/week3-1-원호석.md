# Database Normalization

데이터의 중복을 최소화하고, 데이터 무결성을 유지하기 위해 데이터를 구조화하는 과정. 
-> 데이터 삽입, 수정, 삭제 시 발생할 수 있는 이상(anomaly)을 방지.

---

## 정규화의 목적

- **데이터 중복 제거**: 동일한 정보가 여러 테이블에 저장되는 것을 방지
- **데이터 무결성 유지**: 일관성 있는 데이터 관리
- **데이터 이상 방지**: 삽입 이상, 삭제 이상, 갱신 이상 해결

---

## 정규형(Normal Forms)

### 제1정규형(1NF: First Normal Form)
- **조건**: 모든 속성값이 원자값(의미 있는 요소로 분해 불가능)이어야 함
- **설명**: 반복되는 그룹이나 배열 형태를 제거하여 하나의 값만 저장
- **예시**:

| 학번 | 이름 | 전화번호         |
|------|------|------------------|
| 1001 | 홍길동 | 010-1234-5678, 010-1111-2222 |

➡️ 전화번호를 분리하여 원자값으로 구성

---

### 제2정규형(2NF: Second Normal Form)
- **조건**: 1NF를 만족하고, 기본키의 부분 종속이 없어야 함
- **설명**: 테이블의 비주요 속성이 기본키의 일부분에만 종속되지 않도록 분리
- **예시**:

| 학번 | 과목코드 | 교수이름 |
|------|----------|----------|
| 1001 | CS101    | 김철수   |

➡️ 교수이름은 과목코드에만 종속되므로 교수 정보를 별도 테이블로 분리

---

### 제3정규형(3NF: Third Normal Form)
- **조건**: 2NF를 만족하고, 이행적 종속이 없어야 함
- **설명**: 비주요 속성이 또 다른 비주요 속성에 종속되어 있지 않아야 함
- **예시**:

| 사번 | 부서번호 | 부서이름 |
|------|----------|----------|
| 2001 | D01      | 인사팀   |

➡️ 부서번호 → 부서이름 이므로 부서정보를 별도로 분리

---

## 고급 정규형

### BCNF(Boyce-Codd Normal Form)
- **조건**: 모든 결정자가 후보키여야 함
- **3NF보다 더 엄격한 형태**

### 제4정규형(4NF)
- **조건**: 다치 종속(Multivalued Dependency)을 제거

### 제5정규형(5NF)
- **조건**: 조인 종속(Join Dependency)을 제거

---

## 정규화와 반정규화

- **정규화 장점**: 무결성 유지, 중복 최소화, 저장공간 효율화
- **정규화 단점**: 성능 저하 가능성, 조인 비용 증가
- **반정규화**: 성능을 위해 정규형을 일부 포기하고 테이블을 통합하거나 중복 저장

---

## 실무 적용 예제

### 사례 1: 쇼핑몰 주문 시스템

#### 요구사항
- 하나의 주문에는 여러 상품이 포함될 수 있음
- 각 상품에는 상품명, 단가가 존재
- 주문 시점의 단가를 보존해야 함

#### 정규화 설계
- `Customers(고객)` 테이블
- `Orders(주문)` 테이블: 주문번호, 고객ID, 주문일자 등
- `OrderItems(주문상품)` 테이블: 주문번호, 상품ID, 수량, 당시단가 등
- `Products(상품)` 테이블: 상품ID, 상품명, 현재단가 등

#### 설명
- 상품 정보를 주문 테이블에 직접 넣으면 상품 가격이 변동될 경우 과거 기록이 왜곡됨
- 주문상품 테이블에 "당시단가"를 저장함으로써 정규화 원칙을 유지하면서도 역사 데이터를 보존

---

### 사례 2: 대학 수강신청 시스템

#### 요구사항
- 학생은 여러 과목을 수강할 수 있음
- 과목은 여러 학생이 수강 가능
- 각 과목에는 교수자가 1명 존재함

#### 정규화 설계
- `Students(학생)` 테이블: 학번, 이름 등
- `Courses(과목)` 테이블: 과목코드, 과목명, 교수ID
- `Professors(교수)` 테이블: 교수ID, 이름 등
- `Enrollments(수강)` 테이블: 학번, 과목코드, 성적 등

#### 설명
- 수강 테이블을 통해 다대다 관계를 해소하고, 교수 정보를 과목 테이블과 분리하여 이행적 종속 제거

---

## 참고 용어

- **속성(Attribute)**: 테이블의 열(Column)
- **튜플(Tuple)**: 테이블의 행(Row)
- **기본키(Primary Key)**: 레코드를 고유하게 식별하는 속성
- **부분 종속**: 기본키의 일부에만 종속된 경우
- **이행적 종속**: A → B, B → C일 때 A → C가 되는 관계

---

## 참고 자료
- Database System Concepts (Silberschatz et al.)
- MySQL / PostgreSQL 공식 문서
- 위키백과: https://ko.wikipedia.org/wiki/%EC%A0%95%EA%B7%9C%ED%99%94
