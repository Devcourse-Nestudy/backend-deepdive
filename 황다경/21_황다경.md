데이터베이스(DB) 스키마 설계는 데이터 관리의 핵심이며, 부실한 테이블 설계는 예측할 수 없는 심각한 문제들을 야기할 수 있다.

### 1. 이상 현상 (Anomalies): 삽입, 삭제, 갱신

테이블 설계가 잘못되었을 때, 데이터를 추가(Insertion), 삭제(Deletion), 갱신(Update)하는 과정에서 비정상적인 현상, 즉 '이상 현상(Anomalies)'이 발생할 수 있다. 이는 주로 임직원 정보와 부서 정보처럼 **두 개 이상의 서로 다른 관심사(concerns)가 하나의 테이블에 혼재**되어 있을 때 나타나는 문제점이다.

- **삽입 이상 (Insertion Anomaly)**
  삽입 이상은 새로운 데이터를 추가할 때 발생하는 문제점을 의미한다.

  - **데이터 중복 및 저장 공간 낭비:** 여러 직원이 같은 부서에 속할 경우, 해당 부서의 정보(부서 ID, 부서 이름, 부서 리더 ID)가 각 직원의 레코드마다 중복으로 저장된다. 이로 인해 불필요하게 저장 공간이 낭비된다.
  - **데이터 불일치 가능성:** 중복된 데이터가 많을수록, 실수로 인해 동일한 정보가 다르게 입력될 가능성이 커진다. 예를 들어, 같은 '개발팀'인데도 'Dev'와 'Deb'와 같이 오타가 발생하여 입력되면 데이터의 일관성이 훼손된다.
  - **NULL 값의 과도한 사용:** 아직 부서 배치를 받지 못한 직원을 추가하거나, 직원이 한 명도 없는 부서 정보를 추가할 때, 해당 부서 관련 필드에 강제로 NULL 값을 입력해야 한다. 만약 임직원의 ID와 같이 프라이머리 키(Primary Key)로 지정된 컬럼은 NULL 값을 가질 수 없으므로, 임시 값을 넣어줘야 하는 불편함도 발생한다. NULL 값을 과도하게 사용하는 것은 바람직하지 않다.
  - **부서 정보 관리의 어려움:** 부서 정보만 단독으로 추가하거나 관리하기 어렵다. 예를 들어, 소속된 직원이 없는 QA 부서를 추가하려면, 직원 관련 필드를 모두 NULL로 채우고 임시 Primary Key 값을 넣어 억지로 하나의 로우(Row)를 생성해야 한다. 또한, 해당 부서에 첫 직원이 들어오면 기존의 임시 로우는 불필요해져 삭제해야 하는 번거로움이 발생한다.
  - **해결책:** 이러한 문제의 근본 원인은 **임직원 정보와 부서 정보라는 두 개의 별개 관심사가 하나의 테이블에 혼재**되어 있기 때문이다. 해결을 위해서는 **관심사별로 테이블을 분리**하여 설계해야 한다. 예를 들어, '임직원 테이블'과 '부서 테이블'을 별도로 생성하고, 임직원 테이블에 부서 테이블의 기본 키를 참조하는 외래 키(Foreign Key)를 설정한다. 이렇게 하면 데이터 중복이 줄고, NULL 값 사용이 최소화되며, 데이터 추가가 훨씬 간결해진다.

- **삭제 이상 (Deletion Anomaly)**
  삭제 이상은 데이터를 삭제할 때 발생하는 비정상적인 현상이다.

  - **문제점:** 특정 데이터를 삭제할 때, 의도하지 않게 다른 유용한 정보까지 함께 사라질 수 있다. 예를 들어, QA 팀의 마지막 직원인 '유진'의 정보를 삭제하면, 유진에 대한 정보뿐만 아니라 QA 부서에 대한 정보(부서명, 부서 ID 등)까지 데이터베이스에서 함께 사라질 수 있다. 이 문제를 해결하기 위해 유진 정보만 NULL로 바꾸는 방식은 임직원 ID가 여전히 존재하여 논리적으로 매끄럽지 않으며, 여전히 많은 NULL 값을 유발한다.
  - **해결책:** 테이블을 관심사별로 분리하면, 직원 정보를 삭제하더라도 부서 정보는 별도의 테이블에 남아있으므로 안전하게 보존할 수 있다. 부서 리더 정보만 NULL로 변경하는 등 깔끔하게 처리가 가능해진다.

- **갱신 이상 (Update Anomaly)**
  갱신 이상은 데이터를 업데이트할 때 발생하는 문제점이다.
  - **문제점:** 중복된 데이터 중 일부만 갱신되어 데이터 불일치(Data Inconsistency)가 발생할 수 있다. 예를 들어, '개발팀'의 이름이 'Dev'에서 'Dev1'로 변경되었을 때, 개발팀 소속 직원들 중 '메시'의 부서 이름은 그대로 'Dev'인데 '진호'의 부서 이름만 'Dev1'로 갱신되는 상황이 발생할 수 있다. 이는 같은 부서 정보인데도 불일치가 생기는 것이다.
  - **해결책:** 테이블을 분리하여 부서 정보를 별도의 테이블에서 관리하면, 부서명 갱신 시 해당 부서 테이블의 한 레코드만 수정하면 되므로 데이터 불일치가 발생할 여지가 사라진다.

### 2. 가짜 튜플 (Spurious Tuples)

잘못 설계된 테이블들을 조인(Join)할 때, **원래는 존재하지 않던 '가짜 데이터(Fake Data)'인 스퓨리어스 튜플(Spurious Tuple)이 생성될 수 있다**. '스퓨리어스(Spurious)'는 '가짜'를 의미한다.

- **문제점:** 사진 촬영 회사의 예시에서, 부서 정보와 프로젝트 정보를 불필요하게 나누어 놓은 두 테이블을 조인할 때 이런 문제가 발생할 수 있다. 예를 들어, 부서와 해당 부서가 참여하는 프로젝트 정보를 담은 테이블과, 부서 이름과 프로젝트 위치 정보를 담은 테이블이 있다고 가정한다. 이 두 테이블을 '프로젝트 위치(Project Location)'라는 공통 속성을 기준으로 내추럴 조인(Natural Join)하면, 실제 데이터에 없는 잘못된 부서 이름과 프로젝트 위치의 조합이 결과로 도출될 수 있다. 동일한 부서 ID(예: 1001)에 대해 부서 이름이 'Film'과 'Picachu'로 다르게 나타나는 가짜 튜플이 생성될 수 있으며, 이는 조인 결과의 신뢰도를 크게 떨어뜨린다.
- **근본 원인:** 테이블 설계가 적절하지 않았기 때문이다. 관계형 데이터베이스에서 조인은 기본적으로 **프라이머리 키(Primary Key)와 외래 키(Foreign Key) 관계를 기반으로 수행**되어야 한다. 하지만 잘못 설계된 테이블은 이런 관계가 명확하지 않거나 부적절한 속성을 기준으로 조인될 수 있기 때문에 가짜 튜플이 발생한다.
- **해결책:** 테이블을 의미적으로 관련 있는 속성들로 **세분화하여 정규화**해야 한다. 예를 들어, '부서', '프로젝트', 그리고 '부서-프로젝트 참여'라는 세 개의 테이블로 분리하여 설계한다. 이를 통해 프라이머리 키와 외래 키를 효율적으로 활용하여 가짜 튜플 생성을 방지할 수 있다.

### 3. 과도한 NULL 값 사용의 문제점

NULL 값은 '알 수 없음(Unknown)' 또는 '해당 없음(Not Applicable)'을 의미하며, 과도하게 사용될 경우 여러 문제가 발생한다.

- **조인 결과의 예상치 못한 변화:** NULL 값이 포함된 컬럼을 기준으로 테이블을 조인할 때, 예상했던 데이터가 나타나지 않거나, 다른 결과가 나올 수 있어 데이터 분석 및 활용에 혼란을 줄 수 있다.
- **집계 함수(Aggregate Function) 사용 시 주의 필요:** `COUNT()`와 같은 집계 함수는 NULL 값을 포함하지 않고 계산할 수 있다. 예를 들어, `COUNT(컬럼명)`은 해당 컬럼에서 NULL이 아닌 값만 세는 반면, `COUNT(*)`는 전체 튜플의 수를 센다. 따라서 NULL 값의 존재 여부에 따라 집계 결과가 달라질 수 있어 주의가 필요하다.
- **불필요한 저장 공간 낭비:** 비록 현대의 스토리지 용량이 커졌지만, NULL 값은 불필요하게 저장 공간을 차지하여 장기적으로 스토리지를 낭비할 수 있다.

### 올바른 데이터베이스 스키마 설계를 위한 핵심 원칙

위에서 살펴본 문제점들을 피하고 효과적인 데이터 관리를 위해서는 다음과 같은 원칙을 따른다:

- **의미적으로 관련된 속성끼리 테이블을 구성**한다. 여러 관심사를 하나의 테이블에 묶는 것은 좋은 설계가 아니다.
- **중복 데이터를 최대한 허용하지 않도록 설계**한다.
- **조인 시 가짜 데이터(스퓨리어스 튜플)가 생기지 않도록 설계**한다. 이를 위해 **프라이머리 키와 외래 키를 최대한 잘 활용**하는 것이 중요하다.
- **되도록이면 NULL 값을 줄일 수 있는 방향으로 설계**한다.

---

일반적으로 위 원칙들을 따라 테이블을 잘 나누는 것이 중요하지만, 때로는 **성능 향상**을 위해 의도적으로 여러 테이블을 조인하는 대신 테이블을 나누지 않는 경우도 있다. 이는 여러 테이블을 조인할 때 발생할 수 있는 성능 이슈를 피하기 위함이며, 성능 최적화가 필요한 특정 상황에서 예외적으로 고려될 수 있는 부분이다.

데이터베이스 스키마 설계는 시스템의 안정성과 효율성을 결정하는 중요한 과정이다. 올바른 설계 원칙을 이해하고 적용함으로써 데이터의 무결성을 유지하고 개발 및 관리의 복잡성을 줄일 수 있다.
